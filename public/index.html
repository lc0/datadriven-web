<!doctype html>
<html lang="en" ng-app="datadriven">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Datadriven</title>
  <link href="lib/bootstrap-css/css/bootstrap.css" rel="stylesheet">
  <link href="lib/jquery-ui/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
  <link href="css/app.css" rel="stylesheet">
  <link href="css/graph.css" rel="stylesheet">
  <link href="css/detail.css" rel="stylesheet">
  <link href="css/legend.css" rel="stylesheet">
</head>
<body>
 <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
   <div class="container">
     <div class="navbar-header">
       <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
         <span class="sr-only">Toggle navigation</span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="#">Datadriven</a>
       <a class="navbar-brand" href="#/fb/runs">FB runs</a>
       <a class="navbar-brand" href="#/github">Github </a>

     </div>

     <!-- Collect the nav links, forms, and other content for toggling -->
     <div class="collapse navbar-collapse navbar-ex1-collapse">
       <ul class="nav navbar-nav">

       </ul>
     </div>
     <!-- /.navbar-collapse -->
   </div>
   <!-- /.container -->
  </nav>
  <div class="container" ng-controller="FbController">
      <h4>
          {{welcomeMsg}}
      </h4>
      <button type="button" ng-click="login()" ng-hide="isLoggedIn" class="btn btn-default navbar-btn">
          Login
      </button>
  </div>
  <div class="container" ng-view>
  </div>

   <div class="container" id="chart_container">
        <div id="chart"></div>
        <div id="legend_container">
          <div id="smoother" title="Smoothing"></div>
          <div id="legend"></div>
        </div>
        <div id="slider"></div>
    </div>

  <!--button type="button" onclick="console.log(aggregated);seriesData.push({color: '#ff60c0',data: aggregated,name: 'github'});graph.update();" class="btn btn-default navbar-btn"-->


  <script src="lib/jquery/dist/jquery.js"></script>
  <script src="lib/jquery-ui/jquery-ui.js"></script>
  <script src="lib/lodash/dist/lodash.js"></script>
  <script src="lib/angular/angular.js"></script>
  <script src="lib/angular-resource/angular-resource.js"></script>
  <script src="lib/angular-route/angular-route.js"></script>
  <script src="lib/angular-bootstrap/ui-bootstrap-tpls.js"></script>
  <script src="lib/angular-ui-date/src/date.js"></script>
  <script src="lib/underscore/underscore.js"></script>
  <script src="lib/rickshaw/vendor/d3.v3.js"></script>
  <script src="lib/rickshaw/rickshaw.min.js"></script>
  <script src="lib/angular-rickshaw/rickshaw.min.js"></script>
  <script src="lib/ng-facebook/ngFacebook.js"></script>

  <script src="js/github.js"></script>
  <script src="js/app.js"></script>
  <script src="js/home/home-controller.js"></script>



<script>

// set up our data series with 50 random data points

var seriesData = [ [], [], [] ];
var random = new Rickshaw.Fixtures.RandomData(150);

for (var i = 0; i < 150; i++) {
  random.addData(seriesData);
}

// instantiate our graph!
//aggregtion on d3 side
//*
var aggregated = d3.nest()
                   .key(function(d) { return new Date(d.x*1000).getMonth(); })
                   .rollup(function(d) { return d3.sum(d, function(e) { return +e.y; }); })
                   .entries(Githubdata)
                   .map(function(d) { return {x: +d.key, y: d.values}; });
//*/

var graph = new Rickshaw.Graph( {
  element: document.getElementById("chart"),
  width: 960,
  height: 500,
  renderer: 'line',
  dataURL: '/github.json',
  series: [
    {
      color: "#c05020",
      data: seriesData[0],
      name: 'fitness activity'
    }, {
      color: "#30c020",
      data: seriesData[1],
      name: 'work performance'
    }, {
      color: "#6060c0",
      data: seriesData[2],
      name: 'satisfactions'
    },
  ]
} );

graph.render();


var hoverDetail = new Rickshaw.Graph.HoverDetail( {
  graph: graph
} );

var legend = new Rickshaw.Graph.Legend( {
  graph: graph,
  element: document.getElementById('legend')

} );

var shelving = new Rickshaw.Graph.Behavior.Series.Toggle( {
  graph: graph,
  legend: legend
} );

var axes = new Rickshaw.Graph.Axis.Time( {
  graph: graph
} );
axes.render();

// even more shiity code
document.getElementsByClassName("label")[1].click()
document.getElementsByClassName("label")[2].click()

</script>


</body>
</html>
